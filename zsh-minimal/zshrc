export ZDOTDIR=$HOME

export TERM='xterm-256color'
export LANG="en_US.UTF-8"
export EDITOR=vim
export CLICOLOR=1
export LSCOLORS=exfxbxdxexegedabagacad
export HISTFILE=~/.histfile
export HISTSIZE=10000
export SAVEHIST=1000
export WORDCHARS=''

source "$HOME/Development/config/dotfiles/zsh-minimal/functions/shrink-path.plugin.zsh"

setopt extendedglob   # treat #, ~, and  ^ as part of pattern for filename generation
setopt autocd          # don't require a cd to change directory
setopt auto_menu         # show completion menu on succesive tab press
unsetopt menu_complete   # do not autoselect the first completion entry
setopt hist_ignore_all_dups
setopt hist_ignore_space
setopt append_history     # multiple shells output to the same history file
setopt hist_find_no_dups  # when searching through history, don't show stuff that has already been cycled through
setopt hist_verify        # expand stuff from history, don't run it. (double confirmation)
setopt prompt_subst
unsetopt correct # diable auto-correct for commands
unsetopt correctAll # disable auto-correct for arguments
unsetopt flowcontrol
setopt complete_in_word
setopt always_to_end
setopt interactive_comments

zstyle ':completion:*' list-colors '' # Add colors to the ZSH completion menu
zstyle ':completion:*:*:*:*:*' menu select



# Here come all my zsh plugins
export ZPLUG_HOME=/usr/local/opt/zplug
source $ZPLUG_HOME/init.zsh

zplug "willghatch/zsh-cdr"

# Other things

bindkey -e
bindkey "[3~" delete-char
bindkey '^w' backward-kill-word

zstyle :compinstall filename '/Users/felipe/.zshrc'

alias vim="nvim"

fpath=(/usr/local/share/zsh-completions $fpath)

autoload -Uz compinit && compinit
autoload -Uz colors  && colors
autoload -Uz vcs_info

# ~/Development/elm/ttt at master <untracked filed><staged files><stash><to-be-pushed><merging|rebasing>
zstyle ':vcs_info:*' enable git
precmd() {
  vcs_info
}

zstyle ':vcs_info:git*+set-message:*' hooks git-staged git-untracked git-modified

+vi-git-staged(){
if [[ $(git rev-parse --is-inside-work-tree 2> /dev/null) == 'true' ]] && git status --porcelain | egrep '^(M|D|A|T)' &> /dev/null ; then
        hook_com[staged]+="%{%{$fg[yellow]%}●%{$reset_color%}"
    fi
}

+vi-git-untracked(){
    if [[ $(git rev-parse --is-inside-work-tree 2> /dev/null) == 'true' ]] && git status --porcelain | grep '??' &> /dev/null ; then
        hook_com[misc]+="%{%{$fg[blue]%}●%{$reset_color%}"
    fi
}

+vi-git-modified(){
    if [[ $(git rev-parse --is-inside-work-tree 2> /dev/null) == 'true' ]] && git status --porcelain | egrep '^\s(M|D|A|T)' &> /dev/null ; then
        hook_com[misc]+="%{%{$fg[green]%}●%{$reset_color%}"
    fi
}



zstyle ':vcs_info:git*' formats "%{on %{$fg[blue]%}%b%{$reset_color%} %m%u%c% %{$fg[red]%}%a%{$reset_color%}"
PROMPT='%{$fg[magenta]%}$(shrink_path -f)%{$reset_color%} ${vcs_info_msg_0_}% %{$reset_color%} » '

# Chruby - The Switcher Of Rubies.
source /usr/local/share/chruby/chruby.sh
source /usr/local/share/chruby/auto.sh

export PATH=/Users/felipe/bin:$PATH

export FZF_DEFAULT_COMMAND='ag -g ""'


archey -c -o

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
